<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chess vs GPT</title>
    <link rel="icon" href="favicon.svg" />
    <link rel="stylesheet" href="css/chessboard-1.0.0.min.css" />
    <link rel="stylesheet" href="style.css" />

  <style>
    .pricing-and-stats{display:flex;gap:16px;flex-wrap:wrap;margin-top:8px}
    .pricing-and-stats .pricing-box,.pricing-and-stats .stats-box{background:#0e1524; color:#cdd7f3; border:1px solid #26385a; border-radius:8px; padding:10px; flex:1; min-width:260px}
    .pricing-and-stats .muted{display:block;opacity:0.7;margin-top:4px}
    .hud-toggle{display:block;margin-top:8px;font-size:0.9em}
    .cost-hud{position:fixed;right:12px;bottom:12px;background:#0e1524;color:#cdd7f3;border:1px solid #26385a;border-radius:10px;padding:8px 12px;font-size:0.9em;box-shadow:0 4px 16px rgba(0,0,0,0.4);z-index:9999}
    .cost-hud.hidden{display:none}
    .model-selector{margin-top:10px}
    .model-select{width:100%}
  </style>
  </head>
  <body>
    <h1>Chess vs GPT</h1>
    <div id="board"></div>
    <div id="status"></div>
    <button id="apiKeyBtn" class="btn">Manage API Key</button>
    <div id="costHud" class="cost-hud hidden">Last move: â€” / â€” â†’ $0.000000 | Total: $0.000000</div>

    <!-- API Key Modal -->
    <div id="apiKeyModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>OpenAI API Key</h2>
        <p>
          To play against OpenAI models, you'll need your own API key. This key
          is encrypted and stored only in your browser - we never see or store
          it on our servers.
        </p>
        <div class="security-warning">
          <strong>ðŸ”’ Security Notice:</strong>
          <ul>
            <li>
              Your API key is encrypted and stored locally in your browser
            </li>
            <li>Only use this on trusted devices and secure networks</li>
            <li>We never send your key to any server other than OpenAI</li>
          </ul>
        </div>

        <form id="apiKeyForm">
          <label for="apiKeyInput">OpenAI API Key:</label>
          <input
            type="password"
            id="apiKeyInput"
            placeholder="Enter your OpenAI API key"
            autocomplete="new-password"
          />
        </form>

        <div class="model-selector">
          <label for="modelSelect">Select AI Model:</label>
          <select id="modelSelect" class="model-select">
            <optgroup label="Frontier (recommended)">
              <option value="gpt-5">GPT-5 â€” best for coding/agents</option>
              <option value="gpt-5-mini">GPT-5 mini â€” fast, cheap</option>
              <option value="gpt-5-nano">GPT-5 nano â€” ultra cheap</option>
            </optgroup>
            <optgroup label="Stable & fast">
              <option value="gpt-4o">GPT-4o â€” balanced performance</option>
              <option value="gpt-4o-mini">GPT-4o mini â€” budget</option>
            </optgroup>
          </select>
        </div>

        <div class="pricing-and-stats">
          <div class="pricing-box">
            <strong>Pricing (per 1M tokens):</strong>
            <div id="pricingInfo">Input â€”, Output â€”</div>
            <small id="pricingSource" class="muted"></small>
          </div>
          <div class="stats-box">
            <strong>Cost tracker:</strong>
            <div id="moveCostInfo">Last move: â€” in / â€” out â†’ $0.000000 | Game total: $0.000000</div>
            <label class="hud-toggle">
              <input type="checkbox" id="showHudToggle" />
              Show floating cost HUD during the game
            </label>
          </div>
        </div>

        <div class="storage-selector">
          <label>
            <input type="checkbox" id="persistentStorage" />
            Remember API key between browser sessions (less secure)
          </label>
          <small
            >Unchecked = API key clears when browser closes (more secure)</small
          >
        </div>
        <div class="button-group">
          <button id="saveApiKey" class="btn">Save Key</button>
          <button id="removeApiKey" class="btn btn-danger">Remove Key</button>
        </div>
        <p id="apiKeyStatus" class="status-text"></p>
      </div>
    </div>

    <script src="js/jquery.js"></script>
    <script src="js/chess.js"></script>
    <script src="js/chessboard.js"></script>
    <script src="js/openai.js"></script>
    <script src="js/main.js"></script>
    <script>
      window.va =
        window.va ||
        function () {
          (window.vaq = window.vaq || []).push(arguments);
        };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>
  </body>
</html>
